// Generated by CoffeeScript 1.3.3
(function() {

  define(["Console", "Underscore"], function(Console, _) {
    "use strict";

    var service;
    Console.group("Entering Games service module.");
    service = function($resource, $http) {
      var $send, GamesPlayed, default_opts;
      GamesPlayed = $resource("" + API_BASE + "userGames/played.json", {}, {
        send: {
          method: "POST"
        }
      });
      default_opts = {
        error: function() {},
        success: function() {}
      };
      $send = GamesPlayed.send;
      GamesPlayed.send = function(game, opts) {
        var send_data,
          _this = this;
        send_data = {
          idg: 1,
          idv: game.data.vid,
          pts: game.points,
          instance: game.data.instance,
          langdir: LANG_DIR,
          W: game.send_data || []
        };
        opts = _.extend({}, default_opts, opts);
        return $send(send_data, function(data) {
          if (isString(data.res)) {
            return opts.success.call(_this, data);
          }
        });
      };
      return GamesPlayed;
    };
    Console.groupEnd();
    return service;
  });

}).call(this);
